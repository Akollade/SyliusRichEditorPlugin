{% include '@SyliusUi/_javascripts.html.twig' with {'path': 'bundles/monsieurbizsyliusricheditorplugin/js/rich-editor-js.js'} %}
{% include '@SyliusUi/_stylesheets.html.twig' with {'path': 'bundles/monsieurbizsyliusricheditorplugin/css/rich-editor-css.css'} %}

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', () => {
        let editors = document.querySelectorAll('[data-component="rich-editor"]');
        let uielements = {
            "monsieurbiz.text":{
                "code":"monsieurbiz.text",
                "description":"monsieurbiz_sylius_richeditor.ui_element.monsieurbiz.text.description",
                "icon":"font",
                "title":"monsieurbiz_sylius_richeditor.ui_element.monsieurbiz.text.title"
            }
        };
        editors.forEach(function (editor) {
            let config = new MonsieurBizRichEditorConfig(
                editor,
                uielements
            );
            editor.manager = new MonsieurBizRichEditorManager(config, editor);
        });
    });

    function monsieurBizRichEditorRemoveFile(inputName) {
        let input = document.querySelector('input[name="' + inputName + '"]');
        let fileInput = document.querySelector('input[name="change_' + inputName + '"]');
        console.log(input);
        console.log(fileInput);
        input.parentElement.remove();
        fileInput.style.display = 'inline';
        fileInput.name = inputName;
    }

    // JQuery dependency to init autocomplete with Sylius
    function monsieurBizRichInitAutoComplete() {
        let autocompleteSelector = $(monsieurbizRichEditorPluginConfig.autoCompleteSelector);
        if (autocompleteSelector.length > 0) {
            autocompleteSelector.autoComplete();
        }
    }
</script>

